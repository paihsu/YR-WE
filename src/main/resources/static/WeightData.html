<!DOCTYPE html>
<html ng-app="WeightDataApp">
<head>
<meta charset="UTF-8">
<title>Weight Data App</title>

<script
        src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<link
        href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css"
        rel="stylesheet">
<link rel="stylesheet" type="text/css" href="table.css" />
<link rel="stylesheet" type="text/css" href="posts.css" />
<link rel="shortcut icon" href="Pictures/favicon.ico" type="image/x-icon" />

<script>

var app = angular.module('WeightDataApp',[]);

app.controller('WeightDataCtrl', function($scope, $http) {
	// local, heroku
	var host = window.location.hostnmae =='localhost'?
			'http://localhost:8080 ' :
			'https://wwp-305-project.herokuapp.com'
	var url = window.location.href.split('id=');
	// scope weight , set id
	$scope.weight = {};
	$scope.id = url[1];
	$http({
		method: 'GET',
	    url: host + '/weight/' + $scope.id
	}).then(function(response) {
		$scope.weight = response.data;		
	});
}
// create New Weight: input data 

$scope.createWeightData = function() {
	// Weight(String weddingName, String userNmae ,float currentWeight, float finalWeight, Date finalDate)
	var postRequest = {
			method: 'POST',
			url: host + '/weight',
			data: {
				weddingName: $scope.weight.weddingName,
				userName: $scope.weight.userName,
				currentWeight: $scope.weight.currentWeight,
				finalWeight: $scope.weight.finalWeight,
				finalDate: $scope.weight.finalDate
			}
	}
	if($scope.id !== null) {
		postRequest.data.id = $scope.id;
	}
	// go to next page: WeightResult.html
	$http(postRequest).then(function(response) {
		window.location.href = '/WeightResult.html';
	});
};

</script>
</head>

<body>
	<div ng-controller="WeightDataCtrl" align = "center">
    <center>
	<font size = "16">Please input some information</font> 
	<br></br> 
    Who's Wedding:	<input ng-model="weight.weddingName"/> </p>
	Your Name:	<input ng-model="weight.userName"/> </p>
	Your Current Weight:	<input ng-model="weight.currentWeight"/> </p>
	Your Final Goal:	<input ng-model="weight.finalWeight"/> </p>
	The Wedding Date:	<input ng-model="weight.finalDate"/> </p>
	<br></br> 
	<button ng-click="createWeightData()" class="button"> <font size = "8">Next</button></font> 
	
	</center>
	</div>
</body>
</html>






