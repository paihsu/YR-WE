<!DOCTYPE html>
<html ng-app="WeightResultApp">
<head>
<meta charset="UTF-8">
<title>Weight Result App</title>

<script
        src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
<link
        href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css"
        rel="stylesheet">

<link rel="shortcut icon" href="Pictures/favicon.ico" type="image/x-icon" />

<style>
li {
	background-color: rgb(153,102,153);
  	color: rgb(255,255,204);
}
</style>

<script>
var app = angular.module('WeightResultApp', []);

function loadWeight ($scope, $http) {
	/*
	$http({
		method : 'GET',
		url: (window.location.hostname === 'localhost' ? 
				'http://localhost:8080' : 
				'https://wwp-305-project.herokuapp.com')
		        }).then(function (response) {
		                $scope.posts = response.data;
	};
}
app.controller('WeightResultCtrl', function ($scope, $http) {
	loadWeight($scope, $http);
	// Pai
	var getRequest = {
		method: 'GET',
		url: (window.location.hostname === 'localhost' ? 
        	        'http://localhost:8080/weight' : 
       	        	'https://wwp-305-project.herokuapp.com/weight')
	}
	$http(getRequest).then(function(response) {
		$scope.weight = response.data;
	});
	
	$scope.viewCalendar = function() {
		window.location.href = '/google-calendar-event-insert-js.jsp';
	}
	*/
	//var id = window.location.href.split('id=')[1];
	var id = window.location.href.split('id=')[1];
    var host = window.location.hostname === 'localhost' ?
   'http://localhost:8080' : 'https://wwp-305-project.herokuapp.com'
	$http({
			method: 'GET',
			url: host + '/weight/' + id
		}).then(function(response) {
			$scope.weight = response.data;
		});
	}
	app.controller('WeightResultCtrl', function($scope, $http, $location) {
		loadWeight($scope, $http);
		$scope.id = $location.search().id;
		
		$scope.viewCalendar = function() {
			window.location.href = '/quickstart.html';
		}
	
});

// 1. link to google calender
// 2. do the calculating for: 1.days, 2. caloriAllowance

</script>

</head>
<body>
	<div ng-controller="WeightResultCtrl">
   	<center>
   	<p> </p>
	<h2>Welcome {{weight.userName}}!</h2>  
	<h3>This is Your {{weight.weddingName}} Wedding Weight Plan</h3> 
	<br></br> 
       <h4>Your Result is:</h4>
      	The Current Weight: {{weight.currentWeight}} </br>
      	Your Goal: {{weight.finalWeight}} </br>
      	The Wedding date is: {{weight.finalDate}} </br>
      	Daily Calori Allowance: </br>
      	How Many Day Leaft: </br>
      	<br></br>
      	<button ng-click="viewCalendar()" class="button">View Calendar</button><br />
      	<br></br> 
      	<img src"../Pictures/foodList.jpg" alt="foodList" style="width:304px;height:228px;"></img>
			<br />
	</center>     
	</div>

</body>
</html>